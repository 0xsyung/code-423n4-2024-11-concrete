## Guidelines for Testing

The following guidelines should be adhered to when writing tests for the contracts:

- only unit testing. No integration or story testing.
- testing is your friend. Use it to understand if your code works as expected and **not** to hit some coverage target. Try to cover all edge cases per function, as absurd as they may be. See the unit test as a tool to help you write clean, bugfree and well functioning code, **not** as a burdensome task to do at the end of writing a "presumably successful" contract.
- for the unit tests try to make as little assumptions about the code outside of the tested function as possible. Use **setUp** wisely.
- test the deployment of the contract if it has a constructor.
- test the initializer of a contract if it has one.
- naming convention is:
    - happy path `test` + `_` +  `functionName` + `_` + `shouldCondition`
    - error path `testfail` + `_` +  `functionName` + `_` + `shouldFailIfCondition`
- One test per logical branch. If a logical branch contains one or more events, include them in the testing. Inherit the event contract in the test contract, if there is an event contract.
- The testing function **must have** at least one assertion.
- One test per error. The testing function **must have** an expected revert.
- fuzz testing for mathematical operations. 
- Also test internal functions. In that case write a consumer contract that exposes the internal functions. Put the consumer contract in a folder called `consumers`. 
- Also test abstract contracts. Again use consumers to test the abstract contracts.
- If you test logic that depends on other contracts or libraries. **INDICATE** clearly on which contract or library the test depends on and use a mock contract. Write it into a `//@notice` comment at the top of the Test contract! If that contract or library has not been mocked yet, create a mock contract for it. Put the mock contract in a folder called `mocks`. 


### Example

```js
contract ExampleEvents {
    event SetA(uint256 a);
}

contract Example is ExampleEvents{

    error EmptyArgument();

    uint256 public a;

    function setA(uint256 a_) public {
        if (a_ == 0) revert EmptyArgument();
        
        a = a_;

        emit SetA(a);
    }
}
```

in the test we would do :
```js
contract ExampleTest is Test, ExampleEvents, ... {

    function test_setA_shouldSetVariable() public {
        // implement test, e.g.
        Example example = new Example();
        // if there are events include them in the testing.
        vm.expectEmit(true, true, true, true, address(example));
        emit ExampleEvents.SetA(1);
        example.setA(1);
    }

    function testfail_setA_shouldFailIfArgumentIsEmpty() public {
        // implement test, e.g. 
        Example example = new Example();
        vm.expectRevert(abi.encodePacked(Example.EmptyArgument.selector));
        example.setA(0);
    }

}
```
