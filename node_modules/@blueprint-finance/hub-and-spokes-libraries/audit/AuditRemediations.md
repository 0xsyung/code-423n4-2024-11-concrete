# Documentation Of Remediations

## Issues addressed Overview
- [x] Inconsistent Bit Shifting Leading To Incorrect Permission Handling (HAL-26)
- [x] Incorrect Ecoding Due To Operation Precedence (HAL-27)
- [x] IncorrectLogicalOperatorInTrancheValidation (HAL-28)
- [x] Missing Total Tranche Amount Validation (HAL-13)
- [x] Inadequate Bit Encoding In EncodeRightsFromFlags Function (HAL-29)

Additional Remediations
- [x] Changed GetNumberOfClaims with GetConcreteLiteEnabled
- [x] Removed unused Permissions library functions from Uint8CodecLibV1


## Inconsistent Bit Shifting Leading To Incorrect Permission Handling (HAL-26)
This has been remediated. We are now using the correct bit shifting logic in the Uint8CodecLibV1. We also renamed it to Uint8CodecLibV1 (including a versioning). Now there are no more permissions functions in that library because they were not used anywhere.

## Incorrect Ecoding Due To Operation Precedence (HAL-27)
This has been remediated. We removed the entire set of functions from the Uint8CodecLibV1 library that were not used anywhere.

## IncorrectLogicalOperatorInTrancheValidation (HAL-28)
This has been remediated. We replaced the `&&` operator with `||` in the `getTrancheAmountFractionInWad` and in the `getTrancheFeeFractionInWad` function.

## Missing Total Tranche Amount Validation (HAL-13)
This has been remediated. We added a check to ensure that the total tranche amount is greater than zero.

## Inadequate Bit Encoding In EncodeRightsFromFlags Function (HAL-29)
This is intention. We explain why. 
The default rights setting ought to be that the rights for the protocol are enabled but for the others not. Since in the evm by default every uint256 value (such as the protocol Info encoding) is zero, it would be great to reflect the default rights encoding also in this case, e.g where no protection exists (i.e. the protocol Info = 0). 
We solved this issue by reversing the rights encoding for the protocol.vs the other parties. For the protocol the default is that it can close and foreclose and claim and reclaim. For the others the default is that they can't do anything.

## Changed GetNumberOfClaims with GetConcreteLiteEnabled
```solidity
// previously
concreteLiteInfo.getNumberOfClaims()==1;
// now
concreteLiteInfo.getConcreteLiteEnabled();
```

## We also removed unused functions from the Uint8CodecLibV1 library

